<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Q Election Seats</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://service.sophie.nzz.ch/bundle/sophie-q@^1.2.0-rc,sophie-font@^1.2.0-rc,sophie-color@^1.1.0-rc,sophie-viz-color@^1.2.0-rc[diverging-6].css">
    <script src="https://rawgit.com/filamentgroup/loadCSS/master/src/loadCSS.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/4.1.1/d3.min.js"></script> 
  </head>
  <body>
    <div id="container" style="background-color: #fff; color:#fff;">
      <div id="seats"></div>
    </div>
    <script>
      let data = {
        "item": {
          "title": "Sitzverteilung Parlament Frankreich",
          "sources": [
            {
              "text": "asdjfh",
              "link": {
                "url": "www.nzz.ch",
                "isValid": true
              }
            }
          ],
          "subtitle": "Möglichkeit zusätzliche Informationen als Untertitel zu erfassen",
          "notes": "Jemand musste Josef K. verleumdet haben, denn ohne dass er 'etwas Böses getan hätte, wurde er eines Morgens verhaftet.",
          "totalSeats": 200,
          "parties": [
    {
      "color": {
        "colorCode": "#004e76"
      },
      "name": "Verfassungsdemokraten",
      "seats": 55
    },
    {
      "color": {
        "colorCode": "#0084c7"
      },
      "name": "Kommunistische Partei",
      "seats": 12
    },
    {
      "color": {
        "colorCode": "#6cb8de"
      },
      "name": "Sozialdemokraten",
      "seats": 2
    },
    {
      "color": {
        "colorCode": "#d3574a"
      },
      "name": "Liberaldemokraten",
      "seats": 284,
      "previous": 212
    },
    {
      "color": {
        "colorCode": "#780f03"
      },
      "name": "Komeito",
      "seats": 29,
      "previous": 12
    },
    {
      "color": {
        "colorCode": "#85b84f"
      },
      "name": "Erneuerung Japans",
      "seats": 11,
      "previous": 12
    },
    {
      "color": {
        "colorCode": "#3b6113"
      },
      "name": "Hoffnungspartei",
      "seats": 50,
      "previous": 12
    },
    {
      "color": {},
      "name": "andere",
      "seats": 22
    }
  ]
        },
        "toolRuntimeConfig": {
          "toolBaseUrl": "http://localhost:3000"
        }
      };

      fetch(`http://localhost:3000/rendering-info/html-static?updatedDate=2017-02-09T17:16:49.120Z`, {
          method: 'POST',
          body: JSON.stringify(data),
          headers: {
            'Content-Type': 'application/json'
          }
        })
        .then(response => {
          return response.json();
        })
        .then(data => {
          data.stylesheets.forEach(stylesheet => {
            if (stylesheet.name) {
              stylesheet.url = `http://localhost:3000/stylesheet/${stylesheet.name}`
            }
            loadCSS(stylesheet.url)
          })
          document.getElementById('seats').innerHTML = data.markup;
        })
    </script>
  </body>
</html>
